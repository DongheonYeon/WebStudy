<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Three.js 기준점 비교: Cone vs Sphere</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <script type="module">
      import * as THREE from "three";
      import { OrbitControls } from "three/addons/controls/OrbitControls.js";

      // 1. 장면(Scene) 생성
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x222222);

      // 2. 카메라(Camera) 생성
      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.set(0, 3, 7); // 카메라 위치 설정

      // 3. 렌더러(Renderer) 생성
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // 4. 조명(Light) 추가
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // 은은한 주변광
      scene.add(ambientLight);
      const directionalLight = new THREE.DirectionalLight(0xffffff, 1); // 특정 방향으로 비추는 빛
      directionalLight.position.set(5, 5, 5);
      scene.add(directionalLight);

      // 바닥 평면 추가
      const gridHelper = new THREE.GridHelper(10, 10);
      scene.add(gridHelper);

      // --- 원뿔(ConeGeometry) 생성 ---
      // 원뿔의 기준점은 '밑면의 중심'입니다.
      const coneGeometry = new THREE.ConeGeometry(1, 2, 32); // 반지름 1, 높이 2
      const coneMaterial = new THREE.MeshPhongMaterial({
        color: 0xff8844,
        transparent: true,
        opacity: 0.9,
        depthTest: false,
      });
      const cone = new THREE.Mesh(coneGeometry, coneMaterial);
      //   cone.position.x = -3; // 왼쪽으로 이동
      scene.add(cone);

      // 원뿔의 기준점을 시각적으로 보여주기 위한 좌표축
      const coneAxesHelper = new THREE.AxesHelper(1.5); // 좌표축 길이 1.5
      cone.add(coneAxesHelper); // cone 메쉬에 직접 추가하여 로컬 좌표계를 표시

      // --- 구(SphereGeometry) 생성 ---
      // 구의 기준점은 '구의 정중앙'입니다.
      const sphereGeometry = new THREE.SphereGeometry(1, 32, 32); // 반지름 1
      const sphereMaterial = new THREE.MeshPhongMaterial({
        color: 0x4488ff,
        transparent: true,
        opacity: 0.9,
        depthTest: false,
      });
      const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
      //   sphere.position.x = 3; // 오른쪽으로 이동
      sphere.renderOrder = 1000;
      scene.add(sphere);

      // 구의 기준점을 시각적으로 보여주기 위한 좌표축
      const sphereAxesHelper = new THREE.AxesHelper(1.5); // 좌표축 길이 1.5
      sphere.add(sphereAxesHelper); // sphere 메쉬에 직접 추가하여 로컬 좌표계를 표시

      // 마우스로 화면을 컨트롤하기 위한 OrbitControls
      const controls = new OrbitControls(camera, renderer.domElement);

      // 애니메이션 루프
      function animate() {
        requestAnimationFrame(animate);

        // 각 도형을 Y축으로 회전시켜 기준점을 명확히 보여줌
        cone.rotation.y += 0.005;
        sphere.rotation.y += 0.005;

        controls.update();
        renderer.render(scene, camera);
      }

      animate();

      // 브라우저 창 크기 변경에 대응
      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    </script>
  </body>
</html>
